---
output: github_document
editor_options: 
  chunk_output_type: console
  markdown: 
    wrap: sentence
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# List from SSC/Plan Teams, 2023

-   The SSC would prefer not to make a risk table adjustment based on the difference from Tier 1 to Tier 3 again during the 2024 assessment cycle.

    -   *This has been selected as an option by the SSC, the authors provide this as an option and anticipate that any reductions from the maximum perissible ABC be conducted based on the contents of the risk table*

-   The SSC requests that the next stock assessment bring back a new approach that may include development of a constant buffer based on factors extrinsic to the stock assessment (ecosystem function), or a better representation of the uncertainty in the Tier 1 and control rule calculations such that a reduction from maximum ABC is not needed every year.

    -   *We developed an MSE to address options that relate to ecosystem function*

-   Use posterior distributions from the MCMC to determine probabilities in the risk table and expand the columns in the risk table to include the recommended ABC (and potentially higher values).

    -   *response here*

-   Identify where MLE estimates are being used and where MCMC estimates are being used.


    -   *response here*

-   Also see the SSC’s General Stock Assessment Comments to include convergence diagnostics any time Bayesian results are reported.


    -   *response here*

-   If MCMC diagnostics continue to appear adequate, reference points could be calculated using the posterior distribution used, rather than an analytical calculation.


    -   *response here*

-   The SSC recommends that consideration be given to removal of the Japanese fishery CPUE index (1965-76) from the assessment, because this data set no longer seems to contribute to the assessment.


    -   *response here*

-   A sensitivity test should be done to evaluate the effects of data removal on the assessment.


    -   *response here*

-   Catch-at-age data provided by foreign fishing agencies in the pre-Magnuson era were not produced using the same aging criteria as the AFSC age-and-growth program.

-   Consideration should be given to removal of these data from the assessment.
    A sensitivity test should be done to evaluate the effects of data removal on the assessment.
    Document the method used for determining the selectivity to use in the forward projections and continue to evaluate projection variability due to selectivity.

-   The SSC appreciates the selectivity retrospective comparison and suggests that it might be helpful to limit the comparison to the projection used in each year against only the most recent (best) estimate of selectivity for that year.

-   The SSC supports the use of posterior predictive distributions, an underutilized tool in fisheries science, but common in other fields.

-   To fully implement this approach to Bayesian model checking the SSC recommends plotting a histogram for each data source of the percentile of the predictive distribution in which each data point lies, noting that in a highly consistent model this histogram would be uniform.

-   There is an apparent shift towards older ages in fisheries and trawl survey selectivity that should be investigated further.

-   The SSC agrees with the BSAI GPT’s proposal in their presentation to move the multi-species model out of the pollock stock assessment, where it has been included as an appendix since it was first developed.
    Instead, they suggested it would be a separate chapter listed in parallel with the ESR, as it applies to multiple stocks and informs the ESRs.

-   The SSC suggests revisiting the treatment of the stock-recruit relationship in the assessment model using recent improvements in modeling approaches and a longer time series that encompasses the recent warm period in the EBS.
    Recruitment deviates should be from the stock-recruit relationship and should model variability among annual recruitment estimates based on information in the data and residual variability.

-   The estimation process should ensure that log-normally distributed recruitments are mean unbiased, resulting in unbiased biomass estimates.
    If an informative prior is used for steepness, it should be based on a meta-analysis of related species and reflect the uncertainty of that meta-analysis.

-   Further consideration of time periods (as in previous analyses) and the influence of temperature on the stock-recruit relationship may be helpful.

-   The SSC recognizes that there were significant recent analyses in 2016, 2018 and 2020 and is not requesting a repeat of those but a review of previous work would be helpful.

-   Continue efforts to estimate the proportion of the stock in Russian waters (acoustic mooring work to estimate movement) and to reach out to Russian colleagues to obtain catches in the relevant regions of the Russian EEZ (if possible).

# East Bering Sea pollock <img src="man/figures/logo.png" align="right" height="140/"/>

The R package `ebswp` was developed for doing stock assessments of eastern Bering Sea walleye pollock for the AFSC.
The stock assessment model was coded using the Autodif Model Builder (`ADMB`) software.

## Cloning the repository (optional)

The R package `ebswp` lives on a private GitHub repository.
The repository can be cloned to your computer from the command line or using a user interface.
From the command line using Linux the repository can be cloned using:

``` r
git clone https://github.com/afsc-assessments/ebswp
```

## Installation

There are several options for installing the `ebswp` R package.

### Option 1

The `ebswp` package can be installed from within R using:

``` r
devtools::install_github(repo = "afsc-assessments/ebswp", dependencies = TRUE, 
                         build_vignettes = TRUE, auth_token = "your_PAT")
```

### Option 2

The GitHub repository can be cloned to your computer and the package installed from the command line.
From Linux this would involve:

``` r
git clone https://github.com/afsc-assessments/ebswp
R CMD INSTALL ebswp
```

### Option 3

This time from within R using:

``` r
devtools::install("ebswp")
```

## Help

Help for all `ebswp` functions and data sets can be found on the R help pages associated with each function and data set.
Help for a specific function can be viewed using `?function_name`, for example:

``` r
?run_model
?tab_fit
?plot_sel
```

Alternatively, to see a list of all available functions and data sets use:

``` r
help(package = "ebswp")
```

## Examples

The package vignettes are a great place to see what `ebswp` can do.
You can view the package vignettes from within R using:

``` r
browseVignettes(package = "ebswp")
vignette(topic = "ebswp", package = "ebswp")
```

## Website

All of the vignettes and the help pages for each function are bundled together and published on the website <https://afsc-assessments.github.io/ebswp/>.

## Developers

Developers will want to do things slightly differently.
See the `Model development` vignette.

# Acronymns

NOAA: National Oceanic and Atmospheric Administration\
NMFS: National Marine Fisheries Service\
AFSC: Alaska Fisheries Science Center\
REFM: Resource and Ecology and Fisheries Management

# Legal disclaimer

This repository is a software product and is not official communication of the National Oceanic and Atmospheric Administration (NOAA), or the United States Department of Commerce (DOC).
All NOAA GitHub project code is provided on an ‘as is’ basis and the user assumes responsibility for its use.
Any claims against the DOC or DOC bureaus stemming from the use of this GitHub project will be governed by all applicable Federal law.
Any reference to specific commercial products, processes, or services by service mark, trademark, manufacturer, or otherwise, does not constitute or imply their endorsement, recommendation, or favoring by the DOC.
The DOC seal and logo, or the seal and logo of a DOC bureau, shall not be used in any manner to imply endorsement of any commercial product or activity by the DOC or the United States Government.
